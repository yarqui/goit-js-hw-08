{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { LS_KEYS, readFromLS, removeFromLS, writeToLS } from './common';\n\nconst form = document.querySelector('form.feedback-form');\n\nlet formData = readFromLS(LS_KEYS.feedbackForm) ?? {};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n  removeFromLS(LS_KEYS.feedbackForm);\n  form.reset();\n  console.log(formData);\n};\n\nconst handleInput = throttle(e => {\n  formData[e.target.name] = e.target.value.replace(/\\s+/g, ' ').trim();\n  writeToLS(LS_KEYS.feedbackForm, formData);\n}, 1000);\n\nconst handleLoad = () => {\n  try {\n    const persistedData = readFromLS(LS_KEYS.feedbackForm);\n\n    if (persistedData) {\n      for (let el of form.elements) {\n        const { name, nodeName } = el;\n\n        if (nodeName === 'TEXTAREA' || nodeName === 'INPUT') {\n          el.value = persistedData[name] ?? '';\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nwindow.addEventListener('load', handleLoad);\nform.addEventListener('submit', handleSubmit);\nform.addEventListener('input', handleInput);\n"],"names":["form","formData","readFromLS","LS_KEYS","handleSubmit","removeFromLS","handleInput","throttle","writeToLS","handleLoad","persistedData","el","name","nodeName","error"],"mappings":"6MAGA,MAAMA,EAAO,SAAS,cAAc,oBAAoB,EAExD,IAAIC,EAAWC,EAAWC,EAAQ,YAAY,GAAK,CAAA,EAEnD,MAAMC,EAAe,GAAK,CACxB,EAAE,eAAc,EAChBC,EAAaF,EAAQ,YAAY,EACjCH,EAAK,MAAK,EACV,QAAQ,IAAIC,CAAQ,CACtB,EAEMK,EAAcC,EAAS,GAAK,CAChCN,EAAS,EAAE,OAAO,MAAQ,EAAE,OAAO,MAAM,QAAQ,OAAQ,GAAG,EAAE,KAAI,EAClEO,EAAUL,EAAQ,aAAcF,CAAQ,CAC1C,EAAG,GAAI,EAEDQ,EAAa,IAAM,CACvB,GAAI,CACF,MAAMC,EAAgBR,EAAWC,EAAQ,YAAY,EAErD,GAAIO,EACF,QAASC,KAAMX,EAAK,SAAU,CAC5B,KAAM,CAAE,KAAAY,EAAM,SAAAC,CAAU,EAAGF,GAEvBE,IAAa,YAAcA,IAAa,WAC1CF,EAAG,MAAQD,EAAcE,IAAS,GAErC,CAEJ,OAAQE,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC5B,CACH,EAEA,OAAO,iBAAiB,OAAQL,CAAU,EAC1CT,EAAK,iBAAiB,SAAUI,CAAY,EAC5CJ,EAAK,iBAAiB,QAASM,CAAW"}