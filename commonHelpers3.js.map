{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { LS_KEYS, readFromLS, removeFromLS, writeToLS } from './common';\n\nconst form = document.querySelector('form.feedback-form');\n\nconst createFormData = target => {\n  const data = {};\n  const formData = new FormData(target);\n\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n\n  return data;\n};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n  const data = createFormData(e.currentTarget);\n  removeFromLS(LS_KEYS.feedbackForm);\n  form.reset();\n  console.log(data);\n};\n\nconst handleInput = throttle(e => {\n  const data = createFormData(e.currentTarget);\n  writeToLS(LS_KEYS.feedbackForm, data);\n}, 1000);\n\nconst handleLoad = () => {\n  try {\n    const persistedData = JSON.parse(readFromLS(LS_KEYS.feedbackForm));\n\n    if (persistedData) {\n      for (let el of form.elements) {\n        const { name, nodeName } = el;\n\n        if (nodeName === 'TEXTAREA' || nodeName === 'INPUT') {\n          el.value = persistedData[name] ?? '';\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nwindow.addEventListener('load', handleLoad);\nform.addEventListener('submit', handleSubmit);\n\nform.addEventListener('input', handleInput);\n"],"names":["form","createFormData","target","data","value","key","handleSubmit","removeFromLS","LS_KEYS","handleInput","throttle","writeToLS","handleLoad","persistedData","readFromLS","el","name","nodeName","error"],"mappings":"6MAGA,MAAMA,EAAO,SAAS,cAAc,oBAAoB,EAElDC,EAAiBC,GAAU,CAC/B,MAAMC,EAAO,CAAA,EAGb,OAFiB,IAAI,SAASD,CAAM,EAE3B,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAKE,GAAOD,CAChB,CAAG,EAEMD,CACT,EAEMG,EAAe,GAAK,CACxB,EAAE,eAAc,EAChB,MAAMH,EAAOF,EAAe,EAAE,aAAa,EAC3CM,EAAaC,EAAQ,YAAY,EACjCR,EAAK,MAAK,EACV,QAAQ,IAAIG,CAAI,CAClB,EAEMM,EAAcC,EAAS,GAAK,CAChC,MAAMP,EAAOF,EAAe,EAAE,aAAa,EAC3CU,EAAUH,EAAQ,aAAcL,CAAI,CACtC,EAAG,GAAI,EAEDS,EAAa,IAAM,CACvB,GAAI,CACF,MAAMC,EAAgB,KAAK,MAAMC,EAAWN,EAAQ,YAAY,CAAC,EAEjE,GAAIK,EACF,QAASE,KAAMf,EAAK,SAAU,CAC5B,KAAM,CAAE,KAAAgB,EAAM,SAAAC,CAAU,EAAGF,GAEvBE,IAAa,YAAcA,IAAa,WAC1CF,EAAG,MAAQF,EAAcG,IAAS,GAErC,CAEJ,OAAQE,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC5B,CACH,EAEA,OAAO,iBAAiB,OAAQN,CAAU,EAC1CZ,EAAK,iBAAiB,SAAUM,CAAY,EAE5CN,EAAK,iBAAiB,QAASS,CAAW"}