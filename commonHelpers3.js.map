{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { readFromLS, removeFromLS, writeToLS } from './common';\n\nconst form = document.querySelector('form.feedback-form');\n\nconst createFormData = target => {\n  const data = {};\n  const formData = new FormData(target);\n\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n\n  return data;\n};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n  const data = createFormData(e.currentTarget);\n  removeFromLS('feedback-form-state');\n  form.reset();\n  console.log(data);\n};\n\nconst handleInput = throttle(e => {\n  const data = createFormData(e.currentTarget);\n  writeToLS('feedback-form-state', JSON.stringify(data));\n}, 1000);\n\nconst handleLoad = () => {\n  try {\n    const persistedData = JSON.parse(readFromLS('feedback-form-state'));\n\n    if (persistedData) {\n      for (let el of form.elements) {\n        const { name, nodeName } = el;\n\n        if (nodeName === 'TEXTAREA' || nodeName === 'INPUT') {\n          el.value = persistedData[name] ?? '';\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nwindow.addEventListener('load', handleLoad);\nform.addEventListener('submit', handleSubmit);\n\nform.addEventListener('input', handleInput);\n"],"names":["form","createFormData","target","data","value","key","handleSubmit","removeFromLS","handleInput","throttle","writeToLS","handleLoad","persistedData","readFromLS","el","name","nodeName","error"],"mappings":"sMAGA,MAAMA,EAAO,SAAS,cAAc,oBAAoB,EAElDC,EAAiBC,GAAU,CAC/B,MAAMC,EAAO,CAAA,EAGb,OAFiB,IAAI,SAASD,CAAM,EAE3B,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAKE,GAAOD,CAChB,CAAG,EAEMD,CACT,EAEMG,EAAe,GAAK,CACxB,EAAE,eAAc,EAChB,MAAMH,EAAOF,EAAe,EAAE,aAAa,EAC3CM,EAAa,qBAAqB,EAClCP,EAAK,MAAK,EACV,QAAQ,IAAIG,CAAI,CAClB,EAEMK,EAAcC,EAAS,GAAK,CAChC,MAAMN,EAAOF,EAAe,EAAE,aAAa,EAC3CS,EAAU,sBAAuB,KAAK,UAAUP,CAAI,CAAC,CACvD,EAAG,GAAI,EAEDQ,EAAa,IAAM,CACvB,GAAI,CACF,MAAMC,EAAgB,KAAK,MAAMC,EAAW,qBAAqB,CAAC,EAElE,GAAID,EACF,QAASE,KAAMd,EAAK,SAAU,CAC5B,KAAM,CAAE,KAAAe,EAAM,SAAAC,CAAU,EAAGF,GAEvBE,IAAa,YAAcA,IAAa,WAC1CF,EAAG,MAAQF,EAAcG,IAAS,GAErC,CAEJ,OAAQE,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC5B,CACH,EAEA,OAAO,iBAAiB,OAAQN,CAAU,EAC1CX,EAAK,iBAAiB,SAAUM,CAAY,EAE5CN,EAAK,iBAAiB,QAASQ,CAAW"}