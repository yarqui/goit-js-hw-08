{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport { LS_KEYS, readFromLS, removeFromLS, writeToLS } from './common';\n\nconst form = document.querySelector('form.feedback-form');\n\nlet formData = {};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n  removeFromLS(LS_KEYS.feedbackForm);\n  form.reset();\n  console.log(formData);\n};\n\nconst handleInput = throttle(e => {\n  formData[e.target.name] = e.target.value.trim();\n  writeToLS(LS_KEYS.feedbackForm, formData);\n}, 1000);\n\nconst handleLoad = () => {\n  try {\n    const persistedData = readFromLS(LS_KEYS.feedbackForm);\n\n    if (persistedData) {\n      for (let el of form.elements) {\n        const { name, nodeName } = el;\n\n        if (nodeName === 'TEXTAREA' || nodeName === 'INPUT') {\n          el.value = persistedData[name] ?? '';\n        }\n      }\n    }\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nwindow.addEventListener('load', handleLoad);\nform.addEventListener('submit', handleSubmit);\nform.addEventListener('input', handleInput);\n"],"names":["form","formData","handleSubmit","removeFromLS","LS_KEYS","handleInput","throttle","writeToLS","handleLoad","persistedData","readFromLS","el","name","nodeName","error"],"mappings":"6MAGA,MAAMA,EAAO,SAAS,cAAc,oBAAoB,EAExD,IAAIC,EAAW,CAAA,EAEf,MAAMC,EAAe,GAAK,CACxB,EAAE,eAAc,EAChBC,EAAaC,EAAQ,YAAY,EACjCJ,EAAK,MAAK,EACV,QAAQ,IAAIC,CAAQ,CACtB,EAEMI,EAAcC,EAAS,GAAK,CAChCL,EAAS,EAAE,OAAO,MAAQ,EAAE,OAAO,MAAM,OACzCM,EAAUH,EAAQ,aAAcH,CAAQ,CAC1C,EAAG,GAAI,EAEDO,EAAa,IAAM,CACvB,GAAI,CACF,MAAMC,EAAgBC,EAAWN,EAAQ,YAAY,EAErD,GAAIK,EACF,QAASE,KAAMX,EAAK,SAAU,CAC5B,KAAM,CAAE,KAAAY,EAAM,SAAAC,CAAU,EAAGF,GAEvBE,IAAa,YAAcA,IAAa,WAC1CF,EAAG,MAAQF,EAAcG,IAAS,GAErC,CAEJ,OAAQE,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC5B,CACH,EAEA,OAAO,iBAAiB,OAAQN,CAAU,EAC1CR,EAAK,iBAAiB,SAAUE,CAAY,EAC5CF,EAAK,iBAAiB,QAASK,CAAW"}